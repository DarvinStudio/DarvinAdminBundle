{% trans_default_domain 'admin' %}

{% import _self as menu %}

{% macro render(items) %}

    {% import _self as menu %}

    <ul>
        {% for item in items %}
            <li class="left_menu_{{ item.name }}">
                {% if item.smallIcon %}
                    <a href="{{ item.indexUrl }}" class="img"><img src="{{ asset(item.smallIcon) }}" alt="" width="20" height="20" /></a>
                {% endif %}
                <a href="{{ item.indexUrl }}">{{ item.indexTitle|trans }}</a>
                {% if item.associatedObject
                    and utils_new_objects_countable(item.associatedObject)
                    and utils_count_new_objects(item.associatedObject)
                %}
                    <a href="{{ item.indexUrl }}" class="count">{{ utils_count_new_objects(item.associatedObject) }}</a>
                {% endif %}
                {% if item.children is not empty %}

                    {{ menu.render(item.children) }}

                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endmacro %}

<div class="left_menu">

    {{ menu.render(items) }}

</div>
